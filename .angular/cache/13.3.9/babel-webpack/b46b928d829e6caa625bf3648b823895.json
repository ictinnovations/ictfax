{"ast":null,"code":"import { Router, ActivatedRoute } from '@angular/router';\nimport { Extension, Settings } from './extension';\nimport { ExtensionService } from './extension.service';\nimport 'rxjs/add/operator/toPromise';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"./extension.service\";\n\nfunction AddExtensionComponent_div_65_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Email is invalid \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddExtensionComponent_div_89_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function AddExtensionComponent_div_89_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.updateExtension();\n    });\n    i0.ɵɵtext(2, \"Update\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AddExtensionComponent_div_90_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function AddExtensionComponent_div_90_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.addExtension();\n    });\n    i0.ɵɵtext(2, \"Submit\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nconst _c0 = function () {\n  return {\n    standalone: true\n  };\n};\n\nexport let AddExtensionComponent = /*#__PURE__*/(() => {\n  class AddExtensionComponent {\n    constructor(route, account_service, router) {\n      this.route = route;\n      this.account_service = account_service;\n      this.router = router; // form1: any= {};\n\n      this.extension = new Extension();\n      this.account_id = null;\n      this.settings = new Settings();\n      this.sendbody = false;\n    }\n\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        this.account_id = +params['id'];\n        const test_url = this.router.url.split('/');\n        const lastsegment = test_url[test_url.length - 1];\n\n        if (lastsegment === 'new') {\n          return null;\n        } else {\n          return this.account_service.get_ExtensionData(this.account_id).then(data => {\n            this.extension = data;\n            this.fetch_settings();\n          });\n        }\n      });\n    }\n\n    addExtension() {\n      this.extension.type = 'extension';\n      this.account_service.add_Extension(this.extension).then(response => {\n        if (this.sendbody == true) {\n          this.updateSettings(response);\n        } else {\n          this.deleteSettings(response);\n        }\n\n        this.router.navigate(['../../extension'], {\n          relativeTo: this.route\n        });\n      });\n    }\n\n    updateExtension() {\n      this.account_service.update_Extension(this.extension).then(() => {\n        if (this.sendbody == true) {\n          this.updateSettings(this.extension.account_id);\n        } else {\n          this.deleteSettings(this.extension.account_id);\n        }\n\n        this.router.navigate(['../../extension'], {\n          relativeTo: this.route\n        });\n      }).catch(this.handleError);\n    }\n\n    fetch_settings() {\n      this.account_service.get_Settings(this.extension.account_id).then(response => {\n        this.sendbody = response;\n      }).catch(err => this.handleError(err));\n    }\n\n    updateSettings(account_id) {\n      this.settings.value = 'body';\n      this.account_service.update_Settings(account_id, this.settings).then(data => {}).catch(this.handleError);\n    }\n\n    deleteSettings(account_id) {\n      this.account_service.delete_Settings(account_id).then(data => {}).catch(this.handleError);\n    }\n\n    handleError(error) {\n      console.error('An error occurred', error);\n      return Promise.reject(error.message || error);\n    }\n\n  }\n\n  AddExtensionComponent.ɵfac = function AddExtensionComponent_Factory(t) {\n    return new (t || AddExtensionComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ExtensionService), i0.ɵɵdirectiveInject(i1.Router));\n  };\n\n  AddExtensionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddExtensionComponent,\n    selectors: [[\"ngx-add-extension-component\"]],\n    decls: 91,\n    vars: 34,\n    consts: [[1, \"col-lg-12\"], [\"id\", \"form\"], [\"f1\", \"ngForm\"], [1, \"row\"], [1, \"col-sm-6\"], [1, \"form-group\"], [\"for\", \"username\"], [\"type\", \"text\", \"id\", \"username\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"for\", \"passwd\"], [\"type\", \"password\", \"id\", \"passwd\", \"required\", \"\", \"name\", \"passwd\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"passwd_pin\"], [\"type\", \"password\", \"id\", \"passwd_pin\", \"required\", \"\", \"name\", \"passwd_pin\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"first_name\"], [\"type\", \"text\", \"id\", \"first_name\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"for\", \"last_name\"], [\"type\", \"text\", \"id\", \"last_name\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"for\", \"phone\"], [\"type\", \"phone\", \"id\", \"phone\", \"pattern\", \"[0-9]*\", \"minlength\", \"11\", \"maxlength\", \"16\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"phone\", \"ngModel\"], [1, \"alert\", \"alert-danger\", 3, \"hidden\"], [3, \"hidden\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"email\", \"\", \"pattern\", \"[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"email\", \"ngModel\"], [4, \"ngIf\"], [\"for\", \"active\"], [\"type\", \"radio\", \"name\", \"active\", \"value\", \"0\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"type\", \"radio\", \"name\", \"active\", \"value\", \"1\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"type\", \"checkbox\", 3, \"ngModel\", \"ngModelOptions\", \"checked\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"click\"]],\n    template: function AddExtensionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h3\");\n        i0.ɵɵtext(1, \"Add::Extension \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 0)(3, \"form\", 1, 2)(5, \"nb-card\")(6, \"nb-card-header\");\n        i0.ɵɵtext(7, \" Extension Information \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"nb-card-body\")(9, \"div\", 3)(10, \"div\", 4)(11, \"div\", 5)(12, \"label\", 6);\n        i0.ɵɵtext(13, \"UserName:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function AddExtensionComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.extension.username = $event;\n        });\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(15, \"nb-card\")(16, \"nb-card-header\");\n        i0.ɵɵtext(17, \" Password \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"nb-card-body\")(19, \"div\", 4)(20, \"div\", 5)(21, \"label\", 8);\n        i0.ɵɵtext(22, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function AddExtensionComponent_Template_input_ngModelChange_23_listener($event) {\n          return ctx.extension.passwd = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"div\", 5)(25, \"label\", 10);\n        i0.ɵɵtext(26, \"Password Pin\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function AddExtensionComponent_Template_input_ngModelChange_27_listener($event) {\n          return ctx.extension.passwd_pin = $event;\n        });\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(28, \"nb-card\")(29, \"nb-card-header\");\n        i0.ɵɵtext(30, \" Name \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"nb-card-body\")(32, \"div\", 3)(33, \"div\", 4)(34, \"div\", 5)(35, \"label\", 12);\n        i0.ɵɵtext(36, \"First Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"input\", 13);\n        i0.ɵɵlistener(\"ngModelChange\", function AddExtensionComponent_Template_input_ngModelChange_37_listener($event) {\n          return ctx.extension.first_name = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(38, \"div\", 4)(39, \"div\", 5)(40, \"label\", 14);\n        i0.ɵɵtext(41, \"Last Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"input\", 15);\n        i0.ɵɵlistener(\"ngModelChange\", function AddExtensionComponent_Template_input_ngModelChange_42_listener($event) {\n          return ctx.extension.last_name = $event;\n        });\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(43, \"nb-card\")(44, \"nb-card-header\");\n        i0.ɵɵtext(45, \" User Address \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"nb-card-body\")(47, \"div\", 4)(48, \"div\", 5)(49, \"label\", 16);\n        i0.ɵɵtext(50, \"Phone:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"input\", 17, 18);\n        i0.ɵɵlistener(\"ngModelChange\", function AddExtensionComponent_Template_input_ngModelChange_51_listener($event) {\n          return ctx.extension.phone = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"div\", 19)(54, \"div\", 20);\n        i0.ɵɵtext(55, \"Mobile is required\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(56, \"div\", 20);\n        i0.ɵɵtext(57, \"Mobile numberr should be only numbers\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(58, \"div\", 4)(59, \"div\", 5)(60, \"label\", 21);\n        i0.ɵɵtext(61, \"Email:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(62, \"input\", 22, 23);\n        i0.ɵɵlistener(\"ngModelChange\", function AddExtensionComponent_Template_input_ngModelChange_62_listener($event) {\n          return ctx.extension.email = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"div\", 19);\n        i0.ɵɵtemplate(65, AddExtensionComponent_div_65_Template, 2, 0, \"div\", 24);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(66, \"nb-card\")(67, \"nb-card-header\");\n        i0.ɵɵtext(68, \" Active \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(69, \"nb-card-body\")(70, \"div\", 3)(71, \"div\", 4)(72, \"div\", 5)(73, \"label\", 25);\n        i0.ɵɵtext(74, \"Active:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(75, \"input\", 26);\n        i0.ɵɵlistener(\"ngModelChange\", function AddExtensionComponent_Template_input_ngModelChange_75_listener($event) {\n          return ctx.extension.active = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(76, \" No \");\n        i0.ɵɵelementStart(77, \"input\", 27);\n        i0.ɵɵlistener(\"ngModelChange\", function AddExtensionComponent_Template_input_ngModelChange_77_listener($event) {\n          return ctx.extension.active = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(78, \" Yes \");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(79, \"nb-card\")(80, \"nb-card-header\");\n        i0.ɵɵtext(81, \" Settings \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(82, \"nb-card-body\")(83, \"div\", 3)(84, \"div\", 4)(85, \"div\", 5)(86, \"input\", 28);\n        i0.ɵɵlistener(\"ngModelChange\", function AddExtensionComponent_Template_input_ngModelChange_86_listener($event) {\n          return ctx.sendbody = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(87, \" Send Email Body as coversheet\");\n        i0.ɵɵelement(88, \"br\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵtemplate(89, AddExtensionComponent_div_89_Template, 3, 0, \"div\", 24);\n        i0.ɵɵtemplate(90, AddExtensionComponent_div_90_Template, 3, 0, \"div\", 24);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(52);\n\n        const _r2 = i0.ɵɵreference(63);\n\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.extension.username)(\"ngModelOptions\", i0.ɵɵpureFunction0(26, _c0));\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.extension.passwd);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.extension.passwd_pin);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngModel\", ctx.extension.first_name)(\"ngModelOptions\", i0.ɵɵpureFunction0(27, _c0));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.extension.last_name)(\"ngModelOptions\", i0.ɵɵpureFunction0(28, _c0));\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.extension.phone)(\"ngModelOptions\", i0.ɵɵpureFunction0(29, _c0));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", _r1.valid || _r1.pristine);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"hidden\", !_r1.hasError(\"required\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !_r1.hasError(\"pattern\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.extension.email)(\"ngModelOptions\", i0.ɵɵpureFunction0(30, _c0));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", _r2.valid || _r2.untouched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", _r2.errors && _r2.errors.pattern);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngModel\", ctx.extension.active)(\"ngModelOptions\", i0.ɵɵpureFunction0(31, _c0));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.extension.active)(\"ngModelOptions\", i0.ɵɵpureFunction0(32, _c0));\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.sendbody)(\"ngModelOptions\", i0.ɵɵpureFunction0(33, _c0))(\"checked\", ctx.sendbody);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.account_id > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.account_id);\n      }\n    },\n    styles: [\".mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{padding-right:16px}\"]\n  });\n  return AddExtensionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}